"use strict";let addToCartButton=document.querySelectorAll("#addtocart"),stockGrid=document.querySelector(".row"),cart_size=document.querySelector(".cart-size"),cart_window=document.querySelector(".modal-content .container .row"),remove_from_cart=document.querySelectorAll("#removefromcart");function loadData(){let data=[];const xhr=new XMLHttpRequest;return xhr.open("GET","../data/stock.json",!0),xhr.onload=function(){if(200==this.status){let output=JSON.parse(this.responseText);for(let i=0;i<output.length;i++)data[i]=output[i]}},xhr.send(),data}function updateStockUI(){stock.forEach(elem=>{let output=`\n    <div class="col-3" data-id=${elem.id}>\n      <div class="card m-2" style="width: 18rem;">\n          <img class="card-img-top p-4" src="${elem.avatar}" alt="Card image cap">\n          <div class="card-body">\n              <h4 class="card-title">${elem.name}</h4>\n              <p class="card-text">${elem.description}</p>\n              <div class="actions">\n                  <button class="btn btn-sm btn-primary" id="addtocart">Add to cart</button>\n              </div>\n          </div>\n      </div>                \n  </div>\n    `;stockGrid.innerHTML+=output})}function updateCartUI(){cart=JSON.parse(localStorage.getItem("cart"))||[],cart_size.innerHTML=cart?cart.length:0;let output="";cart&&(cart.forEach(item=>{output+=`\n      <div class="col-3" data-id="${item.id}">\n        <div class="card m-2" style="width: 18rem;">\n            <img class="card-img-top p-4" src="${item.avatar}" alt="Card image cap">\n            <div class="card-body">\n                <h4 class="card-title">Keyboard</h4>\n                <p class="card-text">${item.description}</p>\n                <div class="actions">\n                    <button class="btn btn-sm btn-danger" id="removefromcart">Remove</button>\n                </div>\n            </div>\n        </div>                \n    </div>\n      `}),cart_window.innerHTML=output)}function removeFromCart(id){const new_cart=cart.filter(item=>item.id!=id);localStorage.setItem("cart",JSON.stringify(new_cart)),localStorage.setItem("cart-size",new_cart.length),updateCartUI()}function addToCart(identity){const item=stock.filter(Item=>Item.id===identity);cart.push(item[0]),localStorage.setItem("cart",JSON.stringify(cart)),localStorage.setItem("cart-size",cart.length),swal({title:"Success",text:"Your item has been successfully added to your cart!",icon:"success"}),updateCartUI(),cart_size.innerHTML=cart.length}let stock=loadData(),cart=[];window.addEventListener("load",()=>{updateStockUI(),updateCartUI()}),document.addEventListener("click",e=>{"addtocart"===e.target.id&&addToCart(e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-id"))}),document.addEventListener("click",e=>{"removefromcart"===e.target.id&&removeFromCart(e.target.parentElement.parentElement.parentElement.parentElement.getAttribute("data-id"))});